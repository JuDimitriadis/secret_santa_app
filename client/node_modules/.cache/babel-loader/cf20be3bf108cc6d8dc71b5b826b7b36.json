{"ast":null,"code":"var _jsxFileName = \"/Users/Juliana/Projects/secret_santa_app/client/src/login.js\";\nimport { Component } from \"react\";\nimport { TextField, Button, Stack, Alert } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Registration extends Component {\n  constructor() {\n    super();\n    this.state = {};\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    }, () => console.log(this.state));\n  }\n  async handleSubmit(evt) {\n    evt.preventDefault();\n    this.setState({\n      alert: false\n    });\n    const {\n      email,\n      password\n    } = this.state;\n    if (email && password) {\n      const body = {\n        email: email,\n        password: password\n      };\n      const bodyJson = JSON.stringify(body);\n      const fetchReq = await fetch(\"/api/login\", {\n        method: \"POST\",\n        body: bodyJson,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      const response = await fetchReq.json();\n      if (response.success === false) {\n        this.setState({\n          error: \"Ops, something went wrong! E-mail and/or password incorrect\",\n          alert: \"error\"\n        });\n      } else {\n        // eslint-disable-next-line no-restricted-globals\n        location.reload();\n        return;\n      }\n    } else {\n      console.log(\"missing field\");\n      this.setState({\n        error: \"Please fill out all required fields before submitting\",\n        alert: \"warning\"\n      }\n      // () => console.log(this.state)\n      );\n    }\n    // eslint-disable-next-line no-undef\n    handleSubmit().catch(error => {\n      this.setState({\n        error: error.message,\n        alert: \"error\"\n      });\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 2,\n      direction: \"column\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        required: true,\n        id: \"outlined-required\",\n        label: \"E-Mail\",\n        type: \"email\",\n        name: \"email\",\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"outlined-password-input\",\n        label: \"Password\",\n        type: \"password\",\n        name: \"password\",\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        onClick: this.handleSubmit,\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), this.state.alert && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: this.state.alert,\n        children: this.state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 30\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }, this);\n  }\n}","map":{"version":3,"names":["Component","TextField","Button","Stack","Alert","Registration","constructor","state","handleChange","bind","handleSubmit","e","setState","target","name","value","console","log","evt","preventDefault","alert","email","password","body","bodyJson","JSON","stringify","fetchReq","fetch","method","headers","response","json","success","error","location","reload","catch","message","render"],"sources":["/Users/Juliana/Projects/secret_santa_app/client/src/login.js"],"sourcesContent":["import { Component } from \"react\";\nimport {TextField, Button, Stack, Alert} from '@mui/material';\n\n\nexport default class Registration extends Component {\n    constructor() {\n        super();\n        this.state = {};\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(e) {\n        this.setState(\n            {\n                [e.target.name]: e.target.value,\n            },\n            () => console.log(this.state)\n        );\n    }\n\n    async handleSubmit(evt) {\n        evt.preventDefault();\n        this.setState(\n            {\n                alert: false\n            })\n        const { email, password } = this.state;\n        if (email && password) {\n            const body = {\n                email: email,\n                password: password,\n            };\n            const bodyJson = JSON.stringify(body);\n            const fetchReq = await fetch(\"/api/login\", {\n                method: \"POST\",\n                body: bodyJson,\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n            });\n            const response = await fetchReq.json()\n\n                if (response.success === false) {\n                    this.setState({\n                        error: \"Ops, something went wrong! E-mail and/or password incorrect\",\n                        alert:\"error\"\n                    });\n                } else {\n                        // eslint-disable-next-line no-restricted-globals\n                        location.reload();\n                        return;\n                    }\n        } else {\n            console.log(\"missing field\");\n\n            this.setState(\n                {\n                    error: \"Please fill out all required fields before submitting\",\n                    alert:\"warning\"\n                }\n                // () => console.log(this.state)\n            );\n        }\n         // eslint-disable-next-line no-undef\n         handleSubmit().catch(error => {\n            this.setState(\n                {\n                    error:  error.message,\n                    alert: \"error\"\n                })\n            })\n    }\n\n    render() {\n        return (<Stack spacing={2} direction=\"column\">\n        <TextField required id=\"outlined-required\" label=\"E-Mail\" type=\"email\" name=\"email\" onChange={this.handleChange}/>\n        <TextField id=\"outlined-password-input\" label=\"Password\" type=\"password\" name=\"password\" onChange={this.handleChange}/>\n        <Button variant=\"contained\" size=\"small\" onClick={this.handleSubmit} >Register</Button>\n        {this.state.alert && <Alert severity={this.state.alert}>{this.state.error}</Alert>}\n    </Stack>\n\n       \n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}